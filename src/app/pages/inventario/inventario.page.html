<ion-header>
  <ion-toolbar>
    <ion-title>Inventario</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size="12">
        <ion-list>
          <ion-card *ngFor="let producto of productos">
            <ion-card-header>
              <ion-card-title>{{ producto.Nombre }}</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <p><strong>Precio:</strong> ${{ producto.Precio }}</p>
              <p><strong>Stock:</strong> {{ producto.Stock }}</p>
              <p><strong>Categoría:</strong> {{ producto.Categoria }}</p>
              <p><strong>Proveedor:</strong> {{ producto.proveedor }}</p>
              <div class="action-buttons">
                <ion-button color="warning" (click)="openEditModal(producto)">
                  <ion-icon name="create-outline" slot="start"></ion-icon>
                  Editar
                </ion-button>
                <ion-button color="danger" (click)="deleteProducto(producto.id)">
                  <ion-icon name="trash-outline" slot="start"></ion-icon>
                  Eliminar
                </ion-button>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-list>
      </ion-col>
    </ion-row>

    <!-- Modal para editar producto -->
    <ion-modal [isOpen]="isEditModalOpen" (ionModalDidDismiss)="closeEditModal()">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-title>Editar Producto</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="closeEditModal()">Cerrar</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>

        <ion-content>
          <form [formGroup]="editForm" (ngSubmit)="submitEdit()">
            <ion-item>
              <ion-label position="floating">Nombre</ion-label>
              <ion-input formControlName="Nombre"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Precio</ion-label>
              <ion-input type="number" formControlName="Precio"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Stock</ion-label>
              <ion-input type="number" formControlName="Stock"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label>Categoría</ion-label>
              <ion-select formControlName="Categoria">
                <ion-select-option *ngFor="let categoria of categorias" [value]="categoria.id">
                  {{ categoria.Nombre }}
                </ion-select-option>
              </ion-select>
            </ion-item>
            <ion-item>
              <ion-label>Proveedor</ion-label>
              <ion-select formControlName="proveedor">
                <ion-select-option *ngFor="let proveedor of proveedores" [value]="proveedor.id">
                  {{ proveedor.Nombre }}
                </ion-select-option>
              </ion-select>
            </ion-item>
            <ion-footer>
              <ion-toolbar>
                <ion-button expand="full" type="submit">Guardar Cambios</ion-button>
              </ion-toolbar>
            </ion-footer>
          </form>
        </ion-content>
      </ng-template>
    </ion-modal>
  </ion-grid>
</ion-content>

<!-- Botón de "Inicio" fuera del header, ocupa todo el ancho -->
<div class="full-width-button">
  <ion-button expand="full" color="secondary" (click)="goToHome()">
    <ion-icon name="home" slot="start"></ion-icon>
    Regresar al Inicio
  </ion-button>
</div>
